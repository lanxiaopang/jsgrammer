<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Table列表控件</title>
    <script src="scripts/lib/shCore/shCore.js"></script>
    <script src="scripts/lib/shCore/extend/shBrushJScript.js"></script>
    <link href="css/demo/shCore/shCoreDefault.css" rel="stylesheet" />
    <link href="css/demo/init.css" rel="stylesheet" />
    <link href="css/demo/demoCommon.css" rel="stylesheet" />
    <script type="text/javascript">SyntaxHighlighter.all();</script>
    <script src="scripts/lib/jQuery_1.8.2.min.js"></script>
    <script src="scripts/demoInit.js"></script>
</head>
<body>
    <h1>Table-列表控件</h1>
    <p>Table列表控件，提供数据列表的显示，集成分页控件，可控制分页是否显示、按选中列排序等功能。</p>
    <h2>控件调用方法</h2>
    <pre class="brush: js;">
            require(['table'], function (t) {
                //实例化table 对象
                var table=new t(...);
            });
    </pre>
    <h2>参数说明</h2>
    <table class="param">
        <thead>
            <tr>
                <td>参数名</td>
                <td>作用</td>
                <td>类型</td>
                <td>默认值</td>
                <td>备注</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>to</td>
                <td>需要输出到的容器</td>
                <td>Selector/jQuery Element</td>
                <td></td>
                <td><b>注意：</b>必须设置此参数。</td>
            </tr>
            <tr>
                <td>columns</td>
                <td>表头数据</td>
                <td>Array</td>
                <td></td>
                <td>请参考<code>columns</code>参数说明</td>
            </tr>
            <tr>
                <td>datas</td>
                <td>列表数据</td>
                <td>JSON/Array</td>
                <td></td>
                <td>请参考<code>datas</code>参数说明。初始化时可不需要传递，可通过<code>loadData</code>接口绑定数据。</td>
            </tr>
            <tr>
                <td>tableOption</td>
                <td>列表配置信息</td>
                <td>JSON</td>
                <td></td>
                <td>请参考：<code>tableOption</code>参数说明</td>
            </tr>
            <tr>
                <td>pagerOption</td>
                <td>分页控件配置信息</td>
                <td>JSON</td>
                <td></td>
                <td>请参考：<code>Pager</code>控件中的<code>pagerOption</code>参数说明</td>
            </tr>
        </tbody>
    </table>
    <h3>columns-参数说明</h3>
    <p>columns 为数组，下面的参数说明是数组内一项的说明</p>
    <table class="param">
        <thead>
            <tr>
                <td>参数名</td>
                <td>作用</td>
                <td>类型</td>
                <td>默认值</td>
                <td>备注</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>text</td>
                <td>列显示文本</td>
                <td>String</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>name</td>
                <td>列名</td>
                <td>String</td>
                <td></td>
                <td>此属性做为列排序依据</td>
            </tr>
            <tr>
                <td>width</td>
                <td>列宽</td>
                <td>String/Int</td>
                <td>auto</td>
                <td>
                    若width为数字，则做为像素处理；若为字符串则直接设置到width中，可以为百分比或带有<code>px</code>单位的值；若为<code>*</code>则表示为auto；默认为auto
                </td>
            </tr>
            <tr>
                <td>sort</td>
                <td>是否允许排序</td>
                <td>Bool</td>
                <td>false</td>
                <td>若启用排序，请设置name值，若name值为空，则使用text值</td>
            </tr>
            <tr>
                <td>className</td>
                <td>列样式名</td>
                <td>String</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>type</td>
                <td>展示类型</td>
                <td>String</td>
                <td>html</td>
                <td>详细请参考<code>列类型扩展</code></td>
            </tr>
        </tbody>
    </table>
    <h3>datas-参数说明</h3>
    <p>若datas 为数组格式时： [["value","value",...],...]</p>
    <p>若datas 为JSON格式时请参考下面参数说明，若需要分页则必须指定以下参数</p>
    <table class="param">
        <thead>
            <tr>
                <td>参数名</td>
                <td>作用</td>
                <td>类型</td>
                <td>默认值</td>
                <td>备注</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>dataIndex</td>
                <td>数据开始索引</td>
                <td>Int</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>dataCount</td>
                <td>总数据行数</td>
                <td>Int</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>rowData</td>
                <td>行数据</td>
                <td>Array</td>
                <td></td>
                <td>
                    [["value","value",...],...]
                </td>
            </tr>
        </tbody>
    </table>
    <h3>tableOption-参数说明</h3>
    <table class="param">
        <thead>
            <tr>
                <td>参数名</td>
                <td>作用</td>
                <td>类型</td>
                <td>默认值</td>
                <td>备注</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>className</td>
                <td>表格自定义样式</td>
                <td>String</td>
                <td>table-default</td>
                <td></td>
            </tr>
            <tr>
                <td>showPager</td>
                <td>是否显示分页</td>
                <td>Bool</td>
                <td>true</td>
                <td></td>
            </tr>
            <tr>
                <td>pageSize</td>
                <td>一页显示多少条数据</td>
                <td>Int</td>
                <td>10</td>
                <td></td>
            </tr>
            <tr>
                <td>evenColor</td>
                <td>偶数行背景色</td>
                <td>String</td>
                <td>#f9f9f9</td>
                <td></td>
            </tr>
            <tr>
                <td>oddColor</td>
                <td>奇数行背景色</td>
                <td>String</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>onChangePage</td>
                <td>当跳转分页时触发</td>
                <td>Function</td>
                <td></td>
                <td>
                    会向回调函数中返回<code>pageIndex</code>（页码）和 <code>table</code>实例化对象，相当于<code>Pager</code>控件中的<code>goPage</code>。<br />
                    若<code>datas</code>（表格数据）为静态完整的数据时，将自动显示指定页码的数据；如果是分页部分数据时，可以在此方法中使用loadData加载异步读取的数据。<br />
                    若方法返回<code>false</code>时，则不会触发静态完整数据的页面加载方法。
                </td>
            </tr>
        </tbody>
    </table>
    <h2>接口说明</h2>
    <h3>loadColumns</h3>
    <p>此方法适用于，当表头信息是异步动态获取时，可以先实例化表格，然后调用此方法加载表头。参数请参考<code>columns</code>。</p>
    <p><b>注意：</b>若调用此方法之前，表格内有数据，若表头数据与表格数据不符时，请先设置table.option.datas新的数据信息，然后再绑定表头。</p>
    <h4>调用方法</h4>
    <pre class="brush: js;">
            require(['table'], function (t) {
                //实例化table 对象
                var table=new t(...);
                
                table.loadColumns(...);
            });
    </pre>
    <h3>clearContent</h3>
    <p>此方法可清空整个表格控件包括分页，可用于重新加载表格。</p>
    <h4>调用方法</h4>
    <pre class="brush: js;">
            require(['table'], function (t) {
                //实例化table 对象
                var table=new t(...);
                table.clearContent();
            });
    </pre>
    <h3>clearData</h3>
    <p>此方法可清空表格数据行，可用于重新清空当前页数据。</p>
    <h4>调用方法</h4>
    <pre class="brush: js;">
            require(['table'], function (t) {
                //实例化table 对象
                var table=new t(...);
                table.clearData();
            });
    </pre>
    <h3>loadData</h3>
    <p>加载表格数据，参数参考<code>datas</code>。可用于分页时，加载指定页的数据。</p>
    <h4>调用方法</h4>
    <pre class="brush: js;">
            require(['table'], function (t) {
                //实例化table 对象
                var table=new t(...);
                table.loadData(...);
            });
    </pre>
    <h3>goPage</h3>
    <p>跳转到指定页，跳转时，请先自行判断页码有效性。参数为需要跳转到的页码。</p>
    <h4>调用方法</h4>
    <pre class="brush: js;">
            require(['table'], function (t) {
                //实例化table 对象
                var table=new t(...);
                table.goPage(pageIndex);
            });
    </pre>
    <h2>参考实例</h2>
    <h3>静态数据加载实例</h3>
    <pre class="brush: js;">
            require(["table"], function (t) {
                var datas = [];
                for (var i = 0; i < 100; i++) {
                    datas.push([i + 1, "我是FirstName" + i, "我是LastName" + i, "我是UserName" + i, "我是CreateTime" + i]);
                }
                var table = new t({
                    to: "#demo",
                    columns: [
                        "#", "First Name", "Last Name", "User Name", "Create Time"
                    ],
                    datas: datas
                });
            });
    </pre>
    <iframe src="demo/table_demo.html" frameborder="0" height="500" width="100%"></iframe>
    <h3>使用loadData加载数据</h3>
    <pre class="brush: js;">
        var  table;
        function scriptComplete() {
            require(["table"], function (t) {
                table = new t({
                    to: "#demo",
                    columns: [
                        "#", "First Name", "Last Name", "User Name", "Create Time"
                    ]
                });
            });
        }
        function demo() {
            var datas = [];
            for (var i = 0; i < 100; i++) {
                datas.push([i + 1, "我是FirstName" + i, "我是LastName" + i, "我是UserName" + i, "我是CreateTime" + i]);
            }
            table.loadData(datas);
        }
    </pre>
    <iframe src="demo/table_demo1.html" frameborder="0" height="500" width="100%"></iframe>
    <h3>列表排序</h3>
    <pre class="brush: js;">
                require(["table"], function (t) {
                table = new t({
                    to: "#demo",
                    columns: [
                        { text: "#", name: "#", sort: true },
                        { text: "First Name", name: "FirstName", sort: true },
                        { text: "Last Name", name: "LastName", sort: true },
                        { text: "User Name", name: "UserName", sort: false },
                        { text: "Create Time", sort: true }
                    ],
                    datas: datas,
                    tableOption: {
                        onSort: function (name, isDesc, table) {
                            alert(name + (isDesc ? "倒序" : "正序"));
                            //在这里进行数据请求
                            //table.loadData(...);
                        }
                    }
                });
            });
    </pre>
    <iframe src="demo/table_demo2.html" frameborder="0" height="500" width="100%"></iframe>
</body>
</html>
