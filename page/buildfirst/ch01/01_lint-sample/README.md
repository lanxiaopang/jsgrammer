# Lint Sample

To kick things off we're going to give the lint task a shot. The first thing we'll try is using the [JSLint.com][1] site. In that page, we can paste the code found in [**sample.js**][2], and we need to make sure the `messy white space` option is set to `true`, since we don't care for the opinionated spacing rules set forth by [Crockford][3], in this case. The same goes for the `Indentation` option, which we'll set to `2`, for this example.

![whitespace.png][4]

With these options, we can style white-space however we want, as long as we use 2 spaces to indent our code _(which we did)_. Then, if we click on the _JSLint_ button, we'll get the warnings that can be seen below.

![errors.png][5]

Some of the warnings, such as `Unused 'time'`, and `Expected ';'` are fairly obvious. The issue with writing an expression like what's shown below is that it damages readability.

```js
foo || foo = 1;
```

A more conventional `if` statement would be easier to parse for other developer's minds.

```js
if (!foo)
```

Here is [another version of that file][6], which passes JSLint.

## Using JSHint

[![jshint.png][7]][8]

**JSHint** is a not-so-opinionated JavaScript linter that has been earning a lot of popularity, particularly in _Node.js circles_. [JSHint][8] presents a more modern site, with complete documentation, an installation guide, and even a blog. The `jshint` linter accomplishes the same task as `jslint`, and it is very flexible so you can easily adjust it to your particular coding guidelines and the environment you expect your code to execute in.

As we'll learn in the book, JSHint can be executed from our command-line, when [installed][9] through `npm`, like below.

```shell
npm install -g jshint
```

Then, just run it on a file!

```shell
jshint something.js
```

If you want to read more about the real reasons to pick JSHint over JSLint, [read this blog post][10] by the author of JSHint.

### Linters are not bullet-proof

As you may or may not have noticed, there is an important bug in the code that went undetected by both lint tools. Using `this` in the way we're doing it **won't always work as we might've expected**, since it'll always be bound to the higher order function, and thus we'll share the same counter across all generated functions.

Here's an usage example portraying that issue.

```js
var f1 = compose_ticks_count(4);

f1();
// > '1382441031511_4'
f1();
// > '1382441033927_5'
f1();
// > '1382441034221_6'

var f2 = compose_ticks_count(11);

f1(); // we expect _7, right?
// > '1382441035429_11'
```

The problem is any functions generated by our code will share the root scope of the `compose_ticks_count` function. This issue is fixed in [sample.fixed.js][11]. We couldn't have caught that issue with a linter, since linters don't know our _intentions_. Later in the book we'll learn how we can [develop _Unit Tests_][12] to make sure our code consistently behaves as we expect it to.

  [1]: http://jslint.com
  [2]: sample.js "Sample Code Snippet"
  [3]: http://en.wikipedia.org/wiki/Douglas_Crockford
  [4]: http://i.imgur.com/2D3qQXm.png "Whitespace doesn't matter to us."
  [5]: http://i.imgur.com/l97aEid.png "That's a pretty long list!"
  [6]: sample.jslint.js "Passing JSLint"
  [7]: http://i.imgur.com/b7ZsUe7.png "JSHint Code Quality Tool"
  [8]: http://www.jshint.com/
  [9]: http://www.jshint.com/install/ "Installation instructions"
  [10]: http://anton.kovalyov.net/p/why-jshint/ "Why JSHint?"
  [11]: sample.fixed.js "Final version of the sample"
  [12]: http://coding.smashingmagazine.com/2012/06/27/introduction-to-javascript-unit-testing/ "Introduction to JavaScript Unit Testing"
